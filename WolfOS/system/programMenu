--[[WolfOS is the intellectual property of James Chapman (toxic.wolf@hotmail.co.uk).
Please ask for permission before attempting to redistribute any code relating to WolfOS IN ANY FORM.]]--

local bMenuLoop = true
local tChoices = {}
local tActions = {}
local sUser = WDM.readSystemTemp("current_user")
repeat
	local tAll = WDM.list(WDM.getProgramsDir())
	for nItem = 1, #tAll do
		if string.sub(tAll[nItem], #tAll[nItem] - 4) == ".prog" then
			local sName = WDM.deCamelCase(string.sub(tAll[nItem], 1, #tAll[nItem] - 5))
			table.insert(tChoices, sName)
		end
	end
	local sSelection = WUI.menu(tChoices, "Welcome '" .. sUser .. "'!", "Program Menu", true)		
	if sSelection == "Return" then
		bMenuLoop = false
		os.run({}, WDM.getSystemDir() .. "mainMenu")
	else
		bMenuLoop = false
		local sName = WDM.camelCase(sSelection)
		os.run({}, WDM.getProgramsDir() .. sName .. ".prog/" .. sName)
	end
until bMenuLoop == false